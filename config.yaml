# SVbyEye Pipeline Configuration
# Edit this file to set up your analysis!

# ============================================
# INPUT FILES (YOU NEED TO EDIT THESE!)
# ============================================

# Your SD calls file (TSV/CSV format)
# Should have columns: Sample, Haplotype, SD1_original, SD2_original, SD1_T2T, SD2_T2T, etc.
sd_calls: "data/sd_calls.tsv"

# Assembly FASTA files
# These are your haplotype assemblies
assemblies:
  # All assemblies are in one directory
  assembly_dir: "data/assemblies"
  assembly_pattern: "{sample}_{haplotype}.fasta"

# Reference genome (optional, for T2T coordinates)
# Set to null if you don't have it
reference:
  fasta: null

# ============================================
# FILTERING OPTIONS
# ============================================

# Maximum number of SD pairs to visualize (start small!)
max_sds: 5

# How to select which SDs to visualize
filter:
  # Priority: which SDs to pick first?
  # Options: "genes", "size", "random"
  # - "genes": Prioritize SDs with genes
  # - "size": Largest SDs first
  # - "random": Random selection
  priority: "genes"

  # Filter by specific criteria (all are optional)
  min_sd_size: 1000  # Minimum SD size in bp (set to 0 for no filter)
  require_genes: false  # Only include SDs with genes? (true/false)
  require_t2t_liftover: false  # Only include SDs that lifted to T2T? (true/false)

  # Filter by specific samples or haplotypes (optional)
  # Leave empty to include all
  samples: []  # e.g., ["UKS17D00107", "UKS17D00108"]
  haplotypes: []  # e.g., ["hap1", "hap2"]

# ============================================
# COORDINATE PREFERENCE
# ============================================

# Which coordinates to use for sequence extraction?
# Options: "contig", "t2t", "auto"
# - "contig": Use original contig coordinates (SD1_original, SD2_original)
# - "t2t": Use T2T coordinates (SD1_T2T, SD2_T2T) - requires reference fasta
# - "auto": Try T2T first, fall back to contig if not available
coordinate_system: "contig"

# ============================================
# ALIGNMENT PARAMETERS
# ============================================

# minimap2 settings for aligning SD1 vs SD2
minimap2:
  preset: "asm20"  # Good for high-identity alignments
  # Extra parameters (optional)
  extra_params: "--eqx --secondary=no"

# ============================================
# VISUALIZATION PARAMETERS
# ============================================

# SVbyEye plot settings
svbyeye:
  # Color scheme for alignments
  # Options: "direction" (forward/reverse), "identity" (sequence similarity)
  color_by: "direction"

  # Bin size for binned plots (set to 0 for no binning)
  # Binning shows average identity across bins
  binsize: 1000

  # Highlight insertions/deletions?
  highlight_indels: true
  min_deletion_size: 50  # bp
  min_insertion_size: 50  # bp

  # Output format
  # Options: "png", "pdf", "both"
  format: "both"

  # Plot dimensions (inches)
  width: 12
  height: 8

  # Resolution for PNG (dpi)
  dpi: 300

# ============================================
# ANNOTATIONS (OPTIONAL)
# ============================================

# Add gene annotations to plots?
add_gene_annotations: true

# Gene annotation file (BED or GTF format)
# Can be generated from your SD calls or provided separately
gene_annotations: null  # Set path if you have a separate file

# ============================================
# OUTPUT SETTINGS
# ============================================

# Output directory
output_dir: "results"

# Keep intermediate files?
# If false, only keeps final plots and filtered SD list
keep_intermediate: true

# Generate summary report?
generate_report: true

# ============================================
# COMPUTATIONAL RESOURCES
# ============================================

# Threads for parallel steps
threads:
  minimap2: 4
  default: 1

# Memory limits (optional, for cluster execution)
memory:
  minimap2: "8G"
  default: "4G"
