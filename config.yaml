# SVbyEye pipeline configuration
# Adjust the parameters in this file to describe the input data, prioritisation heuristics,
# and resource requirements that apply to your analysis environment.

# ---------------------------------------------------------------------------
# Input data
# ---------------------------------------------------------------------------

# Path to the SD callset. The table must include Sample, Haplotype, SD1_original, and SD2_original.
# Optional columns such as SD1_T2T, SD2_T2T, SD*_has_exon, and Gene_names enable additional filtering.
sd_calls: "data/sd_calls.tsv"

# Assembly FASTA specification. Provide either explicit mappings from sample/haplotype to files
# or define a directory and filename template as shown below.
assemblies:
  assembly_dir: "data/assemblies"
  assembly_pattern: "{sample}_{haplotype}.fasta"

# Reference genome (optional). Required when coordinate_system is set to "t2t" or "auto".
reference:
  fasta: null

# ---------------------------------------------------------------------------
# SD prioritisation and filtering
# ---------------------------------------------------------------------------

# Maximum number of SD pairs to visualise in a single workflow execution.
max_sds: 5

# Configure prioritisation heuristics and inclusion criteria.
filter:
  # Selection priority controls ordering after filtering. Options: "genes", "size", "random".
  priority: "genes"

  # Minimum average SD length (bp). Set to 0 to disable length filtering.
  min_sd_size: 1000

  # Require evidence of gene content on either SD in the pair.
  require_genes: false

  # Require successful liftover to the reference coordinate system.
  require_t2t_liftover: false

  # Optional restrictions to specific samples or haplotypes. Leave empty to include all values present in the callset.
  samples: []
  haplotypes: []

# ---------------------------------------------------------------------------
# Coordinate system selection
# ---------------------------------------------------------------------------

# Options:
#   - "contig": always use SD*_original coordinates.
#   - "t2t": always use SD*_T2T coordinates (requires reference.fasta).
#   - "auto": prefer SD*_T2T when both pairs are available, otherwise fall back to contig coordinates.
coordinate_system: "contig"

# ---------------------------------------------------------------------------
# Alignment parameters
# ---------------------------------------------------------------------------

# minimap2 settings used by the alignment rule.
minimap2:
  preset: "asm20"
  extra_params: "--eqx --secondary=no"

# ---------------------------------------------------------------------------
# Visualisation parameters
# ---------------------------------------------------------------------------

svbyeye:
  color_by: "direction"   # Use "identity" to colour by sequence identity.
  binsize: 1000            # Set to 0 to disable binning.
  highlight_indels: true
  min_deletion_size: 50
  min_insertion_size: 50
  format: "both"           # Options: "png", "pdf", "both".
  width: 12
  height: 8
  dpi: 300

# Toggle to include gene annotations in future visualisation updates.
add_gene_annotations: true

# Optional gene annotation resource (BED or GTF). Leave null to disable.
gene_annotations: null

# ---------------------------------------------------------------------------
# Output management
# ---------------------------------------------------------------------------

output_dir: "results"
keep_intermediate: true
generate_report: true

# ---------------------------------------------------------------------------
# Execution resources
# ---------------------------------------------------------------------------

threads:
  minimap2: 4
  default: 1

memory:
  minimap2: "8G"
  default: "4G"
